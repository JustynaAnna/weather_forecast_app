(()=>{"use strict";async function e(e){const t=document.querySelector(".weather-icon");let n=document.querySelector(".weather").style,r=document.querySelector(".error"),o=document.querySelector(".future-weather-section").style;try{const i=await fetch("https://api.openweathermap.org/data/2.5/forecast?units=metric&q="+e+"&appid=93c17107b9d0b9d75a192e66ddb20e38&cnt=4");if(console.log(i),!i.ok)throw new Error(`Error! Status: ${i.status}`);const u=await i.json(),c=function(e){const t=e.city.timezone,n=new Date(Date.now()+1e3*t);return new Date(n.getTime()+6e4*(new Date).getTimezoneOffset())}(u);!function(e,t){const n=e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),r=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");document.querySelector(".current-time").textContent=`${r}:${o} ${n}`,document.querySelector(".city").innerHTML=t.city.name,t.list[0]&&(document.querySelector(".weather-description").innerHTML=t.list[0].weather[0].description,document.querySelector(".temp").innerHTML=Math.round(t.list[0].main.temp)+"째C",document.querySelector(".feels-like-temp").innerHTML=Math.round(t.list[0].main.feels_like)+"째C",document.querySelector(".precipitation-chance").innerHTML=t.list[0].pop+"%",document.querySelector(".humidity").innerHTML=t.list[0].main.humidity+"%",document.querySelector(".wind").innerHTML=t.list[0].wind.speed+" km/h",document.querySelector(".prresure").innerHTML=t.list[0].main.pressure+" hPa",document.querySelector(".max-wind-speed").innerHTML=t.list[0].wind.gust+" km/h")}(c,u);const s=`https://openweathermap.org/img/wn/${u.list[0].weather[0].icon.toLowerCase()}@2x.png`;t.src=s;const{sunrise:a,sunset:d}=function(e){const t=1e3*e.city.sunrise,n=1e3*e.city.sunset,r=new Date(t),o=new Date(n);return{sunrise:r.toLocaleTimeString(),sunset:o.toLocaleTimeString()}}(u);document.querySelector(".sunrise").textContent=`Sunrise: ${a}`,document.querySelector(".sunset").textContent=`Sunset: ${d}`,function(e){const t=document.querySelectorAll(".future-weather"),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=new Date;for(let o=0;o<t.length;o++){const i=e.list[o+1],u=new Date(r);u.setDate(r.getDate()+o+1);const c=n[u.getDay()],s=Math.round(i.main.temp)+"째C",a=`https://openweathermap.org/img/wn/${i.weather[0].icon}@2x.png`,d=t[o];d.querySelector(".day-of-week").textContent=c,d.querySelector(".future-icon").src=a,d.querySelector(".future-temp").textContent=s,d.querySelector(".future-weather-description").textContent=i.weather[0].description,d.querySelector(".future-feels-like").innerHTML=Math.round(i.main.feels_like)+"째C",d.querySelector(".future-wind").innerHTML=i.wind.speed+" km/h",d.querySelector(".future-humidity").innerHTML=i.main.humidity+"% &nbsp;",d.querySelector(".future-pressure").innerHTML=i.main.pressure+" hPa",d.querySelector(".future-max-wind").innerHTML=i.wind.gust+" km/h"}}(u),r.style.display="none",n.display="block",o.display="block",console.log(u)}catch(e){r.textContent=`An error occured: ${e.message}`,r.style.display="block",n.display="none",o.display="none"}}document.addEventListener("DOMContentLoaded",(async function(){const t=document.querySelector(".search input");document.querySelector(".search button").addEventListener("click",(()=>{e(t.value)})),t.addEventListener("keydown",(n=>{"Enter"===n.key&&(n.preventDefault(),e(t.value))}))}))})();